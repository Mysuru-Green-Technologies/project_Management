{% extends "base.html" %}

{% block title %}Edit {{ task.task_name }}{% endblock %}
{% block header %}Edit Task: {{ task.task_name }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <form method="POST" action="{{ url_for('edit_task', task_id=task.task_id) }}">
            <div class="mb-3">
                <label for="task_name" class="form-label">Task Name</label>
                <input type="text" class="form-control" id="task_name" name="task_name" 
                       value="{{ task.task_name }}" required>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="3">{{ task.description }}</textarea>
            </div>
            <div class="mb-3">
                <label for="task_type" class="form-label">Task Type</label>
                <select class="form-select" id="task_type" name="task_type" required>
                    <option value="daily" {% if task.task_type == 'daily' %}selected{% endif %}>Daily</option>
                    <option value="weekly" {% if task.task_type == 'weekly' %}selected{% endif %}>Weekly</option>
                    <option value="monthly" {% if task.task_type == 'monthly' %}selected{% endif %}>Monthly</option>
                    <option value="yearly" {% if task.task_type == 'yearly' %}selected{% endif %}>Yearly</option>
                </select>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="planned_start_date" class="form-label">Start Date</label>
                    <input type="date" class="form-control" id="planned_start_date" name="planned_start_date" 
                           value="{{ task.planned_start_date }}" required>
                </div>
                <div class="col-md-6">
                    <label for="planned_end_date" class="form-label">End Date</label>
                    <input type="date" class="form-control" id="planned_end_date" name="planned_end_date" 
                           value="{{ task.planned_end_date }}" required>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="estimated_days" class="form-label">Estimated Days</label>
                    <input type="number" class="form-control" id="estimated_days" name="estimated_days" 
                           value="{{ task.estimated_days }}" required>
                </div>
                <div class="col-md-6">
                    <label for="estimated_cost" class="form-label">Estimated Cost (â‚¹)</label>
                    <input type="number" step="0.01" class="form-control" id="estimated_cost" name="estimated_cost" 
                           value="{{ task.estimated_cost }}" required>
                </div>
            </div>
            <div class="mb-3">
                <label for="status" class="form-label">Status</label>
                <select class="form-select" id="status" name="status" required>
                    <option value="not_started" {% if task.status == 'not_started' %}selected{% endif %}>Not Started</option>
                    <option value="in_progress" {% if task.status == 'in_progress' %}selected{% endif %}>In Progress</option>
                    <option value="completed" {% if task.status == 'completed' %}selected{% endif %}>Completed</option>
                    <option value="delayed" {% if task.status == 'delayed' %}selected{% endif %}>Delayed</option>
                </select>
            </div>
            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">Update Task</button>
                <a href="{{ url_for('task_details', task_id=task.task_id) }}" class="btn btn-outline-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}